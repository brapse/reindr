<!DOCTYPE html
PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
var Reindeer = function(){
  var instance = {};
  var stack = [];
  instance.root = $("<div></div>");

  instance.bind = function(f){
    f();
    return instance;
  }

  instance.text = function(text){
    this.append(text);
    return instance;
  }

  instance.append = function(something){
    instance.root.append(something);
    return instance;
  }

  instance.render = function(target){
    if(target){
      target.html(instance.root.html());
      return instance;
    }else{
      return instance.root.html();
    }
  }

  instance.span = function(){
    return this.bind(function(rd){
      rd.construct("span", arguments));
    }
  }

  instance.a = function(options, fill_func){
    return bind(function(r){
      r.construct("a", options, r.unfold(fill_func);
    });
  }

 instance.unfold = function(func){
 }
 

  instance.construct = function(el, options, contents){
    return $("<" + el + ">" + contents + "</" + el + ">").attr(options);
  }

  return instance;
}

$(document).ready(function(){
  example1 = Reindeer().text("Hello").text(" world").render($("#example1"));

  example2 = Reindeer().span().text("Im ok").render($("#example2"));

  example3 = Reindeer().span().a({href: "http://google.com"},
                                    function(link){ link.text("Go to google!")}).
                                    render("#example3");
});
</script>
</head>
<body>
<h2>Example 1</h2>
<div id="example1"></div>
<h2>Example 2</h2>
<div id="example2"></div>
<h2>Example 3</h2>
<div id="example3"></div>
</body>
</html>
